<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Autenticação</title>
<link rel="stylesheet" href="index.css">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <header class="header">
  <div class="logo"><img src="imagens/logo-glados.jpg" alt="logo-glados" class="logo-glados">Ayda</div>
  <h1><strong class="amarelo">Conheça</strong> Ayda.</h1>
  <p>Rápido. <strong class="amarelo">Prático.</strong><br>Relato. <strong class="amarelo">Ação.</strong> Progresso.</p>
  <div class="btn-group">
    <a href="#" class="btn">SAIBA MAIS</a>
    <button id="open-login" class="btn-login">ENTRAR</button>
  </div>
</header>
<div class="separator"></div>
<section class="section">
  <h2>Nossa Proposta</h2>
  <div class="features">
    <div class="feature">
      <div class="icon"> 
        <span class="material-symbols-outlined">
        add_a_photo
        </span> 
    </div>
      <h3>Relato</h3>
      <p>Tire uma foto do problema ou nos envie uma e deixe registrada junto de uma breve descrição.</p>
    </div>
    <div class="feature">
      <div class="icon">
        <span class="material-symbols-outlined">
        match_case
        </span>
    </div>
      <h3>Narrativa</h3>
      <p>Deixe junto da sua foto uma curta descrição do problema para que possam entender e solucionar o quanto antes.</p>
    </div>
    <div class="feature">
      <div class="icon">
        <span class="material-symbols-outlined">
        exposure_plus_1
        </span>
    </div>
      <h3>Decisão</h3>
      <p>Ordene os relatos votando várias vezes ajudando a decidir qual a prioridade a ser solucionada.</p>
    </div>
    <div class="feature">
      <div class="icon">
        <span class="material-symbols-outlined">
        mobile_camera
        </span>
    </div>
      <h3>Praticidade</h3>
      <p>Ajude a comunidade de forma prática, apenas tire uma foto com seu celular e envie.</p>
    </div>
    <div class="feature">
      <div class="icon">
        <span class="material-symbols-outlined">
        monitoring
        </span>
    </div>
      <h3>Progresso</h3>
      <p>Participe de uma melhora geral da estrutura da sua região, cada relato faz a diferença!</p>
    </div>
  </div>
</section>
<div class="caution"></div> 

<div class="carrossel-wrapper">
<div class="tag">
  <span class="material-symbols-outlined">
keyboard_double_arrow_up
  </span>MAIS RELEVANTES
</div>
<!-- Container que desliza -->
<div class="carrossel-slides">
  <!-- Slide 1 -->
  <div class="slide">
    <div class="texto">
      <h3>“Anônimo”</h3>
      <p>
        -  Rua Mar Cáspio, 15, Parque Atlântico.<br>
        Buraco atrapalhando a circulação dos carros na rua
      </p>
    </div>
    <div class="imagem">
      <img src="imagens/buraco-na-via.jpg" alt="Buraco na rua" />
    </div>
  </div>

  <!-- Slide 2 (exemplo extra) -->
  <div class="slide">
    <div class="texto">
      <h3>“João Silva”</h3>
      <p>
        - Avenida das Flores, 120, Centro.<br>
        Poste de iluminação quebrado há semanas. Precisa de reparo urgente!
      </p>
    </div>
    <div class="imagem">
      <img src="imagens/poste-quebrado.jpg" alt="Poste quebrado" />
    </div>
  </div>

  <!-- Slide 3 (exemplo extra) -->
  <div class="slide">
    <div class="texto">
      <h3>“Maria Oliveira”</h3>
      <p>
        - Rua das Laranjeiras, 45, Bairro Alto.<br>
        Calçada esburacada, perigo para pedestres e cadeirantes.
      </p>
    </div>
    <div class="imagem">
      <img src="imagens/buraco-calcada.jpg" alt="Buraco na calçada" />
    </div>
  </div>

  <!-- Adicione novos <div class="slide">...</div> aqui se precisar de mais avaliações -->
</div>

<!-- Indicadores (bolinhas) -->
<div class="indicators">
<div class="dot active" data-index="0"></div>
<div class="dot" data-index="1"></div>
<div class="dot" data-index="2"></div>
<!-- Se você adicionar mais slides, acrescente mais <div class="dot" data-index="3"></div> e assim por diante -->
</div>
</div>


<article>
  <div class="titulo">Sobre Nós</div>

    <div class="abas">
      <div id="tab-ayda" class="ativo">AYDA</div>
      <div id="tab-visual">VISUAL</div>
    </div>

  <div class="sobre-nos">

  <div class="conteudo">
    <!-- TEXTOS SOBRE NOS -->
    <div id="painel-ayda" class="painel ativo">
      <h4>Quem Somos (AYDA)</h4>
      <p>Somos a <strong>Ayda</strong>, uma plataforma inovadora dedicada a transformar a forma como cidadãos, empresas e órgãos públicos colaboram para manter nossos espaços urbanos em perfeito funcionamento. Acreditamos que cada pessoa tem o poder de contribuir para a melhoria da sua cidade, e é esse propósito que nos move: facilitar o relato de problemas em vias, praças, parques, prédios públicos e demais áreas de convivência, de modo rápido, transparente e eficiente.</p><br>

      <h4>Nossa missão</h4>
      <p>Na Ayda, entendemos que pequenas falhas — como buracos em ruas, iluminação pública deficiente, entulho irregular ou equipamentos urbanos danificados — afetam diretamente a qualidade de vida de todos. Por isso, criamos um ambiente amigável e acessível, onde qualquer usuário pode registrar ocorrências em poucos cliques: basta informar a localização, descrever o problema e anexar uma foto. Em seguida, a equipe responsável, seja municipal ou de gestão privada, recebe a notificação e pode agir de forma ágil, evitando que pequenas demandas se tornem transtornos maiores.</p><br>

      <h4>O que oferecemos</h4>

      <p>
      <strong>Interface intuitiva:</strong> desenvolvemos um painel web e um aplicativo móvel (Android e iOS) que orienta o cidadão passo a passo para o registro das ocorrências;<br><br>

      <strong>Sistema de relevância:</strong> ao publicar seu relato, vote na relevância do mesmo ou veja as outras publicações ja existentes e participe da votação. Quantos mais votos, mais destaque terá;<br><br>

      <strong>Acompanhamento em tempo real:</strong> usuários podem acompanhar as publicações de outros usuários em tempo real, vendo qual tem mais relevancia e necessidade que tenha um reparo;<br><br>

      <strong>Central de relatórios e estatísticas:</strong> autoridades e gestores públicos contam com dashboards completos, que apresentam principais tipos de problemas e áreas mais críticas, auxiliando na priorização de ações.
      </p><br>

      <h4>Nossos valores</h4>

      <p>
      <strong>Transparência:</strong> toda etapa do processo é registrada e auditável. O cidadão vê quando seu reporte foi recebido, validado e solucionado. <br><br>

      <strong>Colaboração:</strong> aproximamos comunidade e poder público, valorizando a participação ativa de cada indivíduo para construir cidades mais seguras e funcionais. <br><br>

      <strong>Inovação:</strong> investimos constantemente em tecnologia de ponta, garantindo que a Ayda esteja sempre atualizada com recursos de georreferenciamento, inteligência de dados e integrações com sistemas de gestão municipais. <br><br>

      <strong>Empatia:</strong> entendemos que quem reporta um problema deseja, acima de tudo, melhorias para seu dia a dia. Por isso, criamos fluxos de atendimento que valorizam o feedback e o reconhecimento dos cidadãos.
      <strong></p></strong><br>

      <h4>Nossa visão</h4>
      <p>
      Sonhamos com cidades cada vez mais conectadas, onde problemas urbanos deixem de se acumular por falta de comunicação. Acreditamos que, quando as pessoas passam a ser protagonistas na zeladoria do próprio bairro, todo o entorno melhora: as autoridades públicas ganham informações valiosas para definir prioridades e as empresas prestadoras de serviços podem agir com maior assertividade.
      Com a <strong>Ayda</strong>, queremos construir um ambiente colaborativo, em que cada denúncia seja um passo em direção a ruas mais seguras, praças mais limpas e espaços públicos que sirvam verdadeiramente a todos. Junte-se a nós e faça parte desse movimento de transformação: juntos, vamos reinventar a maneira de cuidar da nossa cidade!
      </p><br>

      <h4>Equipe Ayda</h4>
      <p>Por trás da plataforma, um time multidisciplinar de desenvolvedores, designers, entusiastas em urbanismo e atendimento ao cidadão que trabalham diariamente para aprimorar funcionalidades, oferecer suporte e buscar parcerias estratégicas. Se você está interessado em saber mais, sugerir melhorias ou se tornar um parceiro, entre em contato conosco: <strong>o futuro das nossas cidades depende da colaboração de todos</strong>.</p>

      <div class="social-icons">
  </a>
  <a href="https://www.instagram.com/seuPerfil" target="_blank" aria-label="Instagram">
    <i class="fab fa-instagram"></i>
  </a>
  <a href="https://twitter.com/seuPerfil" target="_blank" aria-label="Twitter">
    <i class="fab fa-twitter"></i>
  </a>
  </a>
  <a href="https://wa.me/5565999527412" target="_blank" aria-label="WhatsApp">
    <i class="fab fa-whatsapp"></i>
  </a>
  </div>

        <img src="https://via.placeholder.com/500x200.png?text=Imagem+AYDA" alt="Exemplo de imagem AYDA">
      </div>
  
      <!-- Painel VISUAL -->
      <div id="painel-visual" class="painel">
        <h4>Nosso Estilo Visual</h4>
        <p>
          A aba VISUAL mostra o lado mais gráfico do nosso projeto: como somos
          vistos pelo público, nosso design, identidade visual e paleta de cores.
        </p>
        <p>
          Características do nosso visual:
        </p>
        <ul>
          <li>Logotipo moderno e minimalista</li>
          <li>Paleta em tons de verde e cinza</li>
          <li>Layout responsivo e clean</li>
        </ul>
        <img src="https://via.placeholder.com/500x200.png?text=Identidade+Visual" alt="Exemplo de identidade visual">
      </div>
    </div>
  </div>
</article>




<!-- ESTRUTURA DO POP-UP DE LOGIN -->
<div id="login-modal" class="modal-backdrop">
  <div class="modal-content login-box">
    <button class="modal-close" id="close-login">&times;</button>
    <h2>Autenticação</h2>
    <a href="main.html">MAIN</a>
    <div id="message" class="message"></div>

    <!-- Formulário de Login -->
    <form id="login-form" style="display:flex; flex-direction:column;">
      <input type="text" id="login-identifier" placeholder="E-mail ou Nome de usuário" required />
      <input type="password" id="login-password" placeholder="Senha" required />
      <input type="submit" value="Entrar" />
    </form>

    <!-- Formulário de Cadastro -->
    <form id="register-form" style="display:none; flex-direction:column;">
      <input type="text" id="register-username" placeholder="Nome de usuário" required />
      <input type="email" id="register-email" placeholder="E-mail" required />
      <input type="password" id="register-password" placeholder="Senha" required />
      <input type="password" id="register-confirm" placeholder="Confirmar Senha" required />
      <input type="submit" value="Cadastrar" />
    </form>

    <p>——— ou  ———</p>

    <!-- Login com Google -->
    <div id="google-login">
      <div id="g_id_onload"
        data-client_id="760527345403-gvthlq5bnv4aqh58uhnksn5inmbis5vr.apps.googleusercontent.com"
        data-context="signin"
        data-ux_mode="popup"
        data-callback="handleCredentialResponse"
        data-auto_prompt="false">
      </div>
      <div class="g_id_signin"
        data-type="standard"
        data-theme="outline"
        data-text="sign_in_with"
        data-size="large">
      </div>
    </div>

    <!-- Toggle between login and register -->
    <p id="toggle-text">Não possui conta? <a href="#" id="toggle-link">Cadastrar</a></p>
  </div>
</div>

<script>
  const API_BASE = 'http://localhost:3000';
  const openBtn = document.getElementById('open-login');
  const closeBtn = document.getElementById('close-login');
  const modal   = document.getElementById('login-modal');

  openBtn.addEventListener('click', () => modal.classList.add('active'));
  closeBtn.addEventListener('click', () => modal.classList.remove('active'));
  modal.addEventListener('click', e => {
    if (e.target === modal) modal.classList.remove('active');
  });

  const loginForm    = document.getElementById('login-form');
  const registerForm = document.getElementById('register-form');
  const messageBox   = document.getElementById('message');
  const toggleText   = document.getElementById('toggle-text');

  function showMessage(type, text) {
    messageBox.className = 'message ' + type;
    messageBox.textContent = text;
    messageBox.style.display = 'block';
    setTimeout(() => { messageBox.style.display = 'none'; }, 5000);
  }

  function handleToggle(e) {
    e.preventDefault();
    const title = document.querySelector('.login-box h2');
    if (loginForm.style.display !== 'none') {
      loginForm.style.display    = 'none';
      registerForm.style.display = 'flex';
      toggleText.innerHTML       = 'Já possui conta? <a href="#" id="toggle-link">Login</a>';
      title.textContent          = 'Cadastro';
    } else {
      registerForm.style.display = 'none';
      loginForm.style.display    = 'flex';
      toggleText.innerHTML       = 'Não possui conta? <a href="#" id="toggle-link">Cadastrar</a>';
      title.textContent          = 'Autenticação';
    }
    document.getElementById('toggle-link').addEventListener('click', handleToggle);
    messageBox.style.display = 'none';
  }

  document.getElementById('toggle-link').addEventListener('click', handleToggle);

  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const identifier = document.getElementById('login-identifier').value;
    const password   = document.getElementById('login-password').value;
    try {
      const res  = await fetch(`${API_BASE}/auth/login`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ identifier, password })
      });
      const text = await res.text();
      if (!res.ok) throw new Error(text);
      showMessage('success', 'Login bem-sucedido!');
      setTimeout(() => window.location.href = 'main.html', 800);
    } catch (err) {
      showMessage('error', err.message || 'Falha no login.');
    }
  });

  registerForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const username = document.getElementById('register-username').value;
    const email    = document.getElementById('register-email').value;
    const password = document.getElementById('register-password').value;
    const confirm  = document.getElementById('register-confirm').value;
    if (password !== confirm) return showMessage('error', 'Senhas não coincidem.');
    try {
      const res  = await fetch(`${API_BASE}/auth/register`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ username, email, password })
      });
      const text = await res.text(); if (!res.ok) throw new Error(text);
      showMessage('success', 'Cadastro realizado!');
      setTimeout(() => handleToggle(new Event('click')), 500);
    } catch (err) {
      showMessage('error', err.message || 'Falha no cadastro.');
    }
  });

  async function handleCredentialResponse(response) {
    try {
      const res  = await fetch(`${API_BASE}/auth/google`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ token: response.credential })
      });
      const text = await res.text(); if (!res.ok) throw new Error(text);
      showMessage('success', 'Login Google bem-sucedido!');
      setTimeout(() => window.location.href = 'main.html', 1000);
    } catch (err) {
      showMessage('error', err.message || 'Login Google falhou.');
    }
  }


  /* SCRIPT DO CARROSEL*/
    // ===== Seleciona elementos =====
  const slidesContainer = document.querySelector(".carrossel-slides");
  const allSlides = document.querySelectorAll(".slide");
  const dots = document.querySelectorAll(".dot");
  let currentIndex = 0;
  const intervalo = 5000;
  const totalSlides = allSlides.length;

  function showSlide(n) {
    slidesContainer.style.transform = `translateX(${-n * 100}%)`;
    dots.forEach(dot => dot.classList.remove("active"));
    dots[n].classList.add("active");
    currentIndex = n;
  }

  function nextSlide() {
    let proximo = currentIndex + 1;
    if (proximo >= totalSlides) proximo = 0;
    showSlide(proximo);
  }

  function prevSlide() {
    let anterior = currentIndex - 1;
    if (anterior < 0) anterior = totalSlides - 1;
    showSlide(anterior);
  }

  let carouselInterval = setInterval(nextSlide, intervalo);

  dots.forEach(dot => {
    dot.addEventListener("click", () => {
      const idx = parseInt(dot.getAttribute("data-index"), 10);
      showSlide(idx);
      clearInterval(carouselInterval);
      carouselInterval = setInterval(nextSlide, intervalo);
    });
  });

  const wrapper = document.querySelector(".carrossel-wrapper");
  wrapper.addEventListener("mouseenter", () => {
    clearInterval(carouselInterval);
  });
  wrapper.addEventListener("mouseleave", () => {
    carouselInterval = setInterval(nextSlide, intervalo);
  });

  // ====== SUPORTE A GESTOS DE TOQUE ======
  let touchStartX = 0;
  let touchEndX = 0;

  wrapper.addEventListener("touchstart", (e) => {
    touchStartX = e.changedTouches[0].screenX;
  });

  wrapper.addEventListener("touchend", (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleGesture();
  });

  function handleGesture() {
    const delta = touchEndX - touchStartX;
    const minSwipeDistance = 50;

    if (Math.abs(delta) > minSwipeDistance) {
      if (delta < 0) {
        // deslizou para a esquerda → próximo slide
        nextSlide();
      } else {
        // deslizou para a direita → slide anterior
        prevSlide();
      }
      clearInterval(carouselInterval);
      carouselInterval = setInterval(nextSlide, intervalo);
    }
  }

  // Seleciona as abas e os painéis correspondentes
    const tabAyda = document.getElementById("tab-ayda");
    const tabVisual = document.getElementById("tab-visual");
    const painelAyda = document.getElementById("painel-ayda");
    const painelVisual = document.getElementById("painel-visual");

    // Função para ativar a aba AYDA
    function ativarAyda() {
      // Marca a aba AYDA como ativa
      tabAyda.classList.add("ativo");
      tabVisual.classList.remove("ativo");
      // Exibe o painel Ayda, esconde o Visual
      painelAyda.classList.add("ativo");
      painelVisual.classList.remove("ativo");
    }

    // Função para ativar a aba VISUAL
    function ativarVisual() {
      tabAyda.classList.remove("ativo");
      tabVisual.classList.add("ativo");
      painelAyda.classList.remove("ativo");
      painelVisual.classList.add("ativo");
    }

    // Adiciona ouvintes de clique
    tabAyda.addEventListener("click", ativarAyda);
    tabVisual.addEventListener("click", ativarVisual);

</script>
</body>
</html>
